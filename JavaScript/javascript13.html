<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
</head>
<body>
    <div id='div0'>Click me! DIV 0</div>
    <div id='div1'>Click me! DIV 1</div>
    <div id='div2'>Click me! DIV 2</div>
    <script>
        var len =3;
        
        for(var i=0;i<len;i++){
            document.getElementById('div'+i)
                    .addEventListener('click',
                                      (function(index) {
                                          document.write('add click callback for div #'+index, '<br/>');
                                          return function(){
                                                    alert('You Clicked div #' + index);
                                                 };
                                       }(i))// IIFe 즉시 호출함수.마지막에 매개변수를 넣어주듯 끝나면서(i)
                                            // 함수가 만들어지면서 실행
                                       // 상위스코프(function(index))에 있는 어떠한 변수(index)를
                                       // 하위스코프에 있는 어떤 함수(function(){alert~})가
                                       // 사용하면서 클로저 발생.
                                       ,false);
        }
    </script>
</body>
</html>